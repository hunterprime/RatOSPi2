"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[5903],{3905:function(e,t,r){r.d(t,{Zo:function(){return d},kt:function(){return u}});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(r),u=a,h=c["".concat(s,".").concat(u)]||c[u]||m[u]||i;return r?n.createElement(h,o(o({ref:t},d),{},{components:r})):n.createElement(h,o({ref:t},d))}));function u(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<i;p++)o[p]=r[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},9991:function(e,t,r){r.r(t),r.d(t,{assets:function(){return s},contentTitle:function(){return o},default:function(){return m},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return p}});var n=r(3117),a=(r(7294),r(3905));const i={sidebar_label:"SKR 2 429"},o="BIGTREETECH SKR 2 w/ STM32F429",l={unversionedId:"boards/btt/skr-2-429",id:"version-1.2.x/boards/btt/skr-2-429",title:"BIGTREETECH SKR 2 w/ STM32F429",description:"This board currently cannot be flashed automatically through USB, that means all firmware updates have to be done by physically moving an sd card from and to the board for now. RatOS compiles the firmware binary for you each time klipper is updated (while the SKR 2 is connected), you can find the most recent firmware in the Mainsail Machine page under the firmware_binaries folder). Automatic flashing may be possible in the future if SDIO support is implemented in klipper. See this thread//github.com/Klipper3d/klipper/pull/4881#issuecomment-962596510 for more info.",source:"@site/versioned_docs/version-1.2.x/boards/btt/skr-2-429.md",sourceDirName:"boards/btt",slug:"/boards/btt/skr-2-429",permalink:"/docs/1.2.x/boards/btt/skr-2-429",draft:!1,editUrl:"https://github.com/Rat-OS/RatOS/edit/v2.x/site/versioned_docs/version-1.2.x/boards/btt/skr-2-429.md",tags:[],version:"1.2.x",frontMatter:{sidebar_label:"SKR 2 429"},sidebar:"docsSidebar",previous:{title:"Octopus Pro 446",permalink:"/docs/1.2.x/boards/btt/octopus-pro-446"},next:{title:"SKR Pro v1.2",permalink:"/docs/1.2.x/boards/btt/skr-pro-12"}},s={},p=[{value:"Wiring",id:"wiring",level:2},{value:"Firmware installation",id:"firmware-installation",level:2},{value:"Manual firmware upgrade",id:"manual-firmware-upgrade",level:2}],d={toc:p};function m(e){let{components:t,...i}=e;return(0,a.kt)("wrapper",(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"bigtreetech-skr-2-w-stm32f429"},"BIGTREETECH SKR 2 w/ STM32F429"),(0,a.kt)("admonition",{title:"Only Partial support",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"This board currently cannot be flashed automatically through USB, that means all firmware updates have to be done by physically moving an sd card from and to the board for now. RatOS compiles the firmware binary for you each time klipper is updated (while the SKR 2 is connected), you can find the most recent firmware in the Mainsail Machine page under the ",(0,a.kt)("inlineCode",{parentName:"p"},"firmware_binaries")," folder). Automatic flashing may be possible in the future if SDIO support is implemented in klipper. See this thread: ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/Klipper3d/klipper/pull/4881#issuecomment-962596510"},"https://github.com/Klipper3d/klipper/pull/4881#issuecomment-962596510")," for more info.")),(0,a.kt)("h2",{id:"wiring"},"Wiring"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"BTT Octopus Pro STM32F429 Wiring Diagram",src:r(7079).Z,width:"2324",height:"1557"}),"\n",(0,a.kt)("a",{target:"_blank",href:r(9447).Z},"Open Full Size Image")),(0,a.kt)("admonition",{type:"danger"},(0,a.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"if you use the Ratrig endstop switches and cables, do ",(0,a.kt)("strong",{parentName:"mdxAdmonitionTitle"},"not")," blindly plug them in to your SKR 2 as doing this will short the board's 5V power rail."),(0,a.kt)("p",{parentName:"admonition"},"You will probably have to swap the outer two wires (red and white) on the board end of the cable but double check to make sure your cables match the wiring diagram.")),(0,a.kt)("admonition",{title:"Jumpers",type:"info"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("img",{alt:"Jumper Symbol",src:r(2293).Z,width:"40",height:"16"})," A green square with triangles inside is where you would place a jumper,\nremove all jumpers on the board that are not marked by this symbol.")),(0,a.kt)("h2",{id:"firmware-installation"},"Firmware installation"),(0,a.kt)("admonition",{title:"Use a proper cable",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"Make sure your board is connected to the Pi ",(0,a.kt)("strong",{parentName:"p"},"via the provided USB cable")," (USB-B on the SKR 2 429, USB-A on the Pi).")),(0,a.kt)("p",null,"Download the ",(0,a.kt)("inlineCode",{parentName:"p"},"firmware-btt-skr-2-429.bin")," from the ",(0,a.kt)("inlineCode",{parentName:"p"},"firmware_binaries")," folder found on the Machine page of ",(0,a.kt)("a",{parentName:"p",href:"http://RatOS.local/"},"Mainsail"),", copy it onto the SD card that goes into your control board and call it ",(0,a.kt)("inlineCode",{parentName:"p"},"firmware.bin"),", then insert the SD card in to the control board. Here are the steps in chronological order:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Navigate to ",(0,a.kt)("a",{parentName:"li",href:"http://RatOS.local/"},"http://RatOS.local/")),(0,a.kt)("li",{parentName:"ol"},"Open Machine page"),(0,a.kt)("li",{parentName:"ol"},"Open ",(0,a.kt)("inlineCode",{parentName:"li"},"firmware_binaries")," folder"),(0,a.kt)("li",{parentName:"ol"},"Download ",(0,a.kt)("inlineCode",{parentName:"li"},"firmware-btt-skr-2-429.bin")),(0,a.kt)("li",{parentName:"ol"},"Format the sd card for your board to FAT16 (sometimes just called FAT), or FAT32 with a clustersize of 8kb or 4kb."),(0,a.kt)("li",{parentName:"ol"},"Copy ",(0,a.kt)("inlineCode",{parentName:"li"},"firmware-btt-skr-2-429.bin")," onto the sd card for your board"),(0,a.kt)("li",{parentName:"ol"},"Rename ",(0,a.kt)("inlineCode",{parentName:"li"},"firmware-btt-skr-2-429.bin")," to ",(0,a.kt)("inlineCode",{parentName:"li"},"firmware.bin"),". Please be wary of file extensions! If the file doesn't already show .bin, don't add it!"),(0,a.kt)("li",{parentName:"ol"},"Safely eject the SD card through your operating system."),(0,a.kt)("li",{parentName:"ol"},"Physically take out the sd card and insert it into your control board."),(0,a.kt)("li",{parentName:"ol"},"Power cycle your printer or control board. Remember to shut the pi down properly before you cut power to your Pi (you can do that through Mainsail using the dropdown menu in the top right corner)."),(0,a.kt)("li",{parentName:"ol"},"Verify that the firmware has been flashed.")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"If you don't know how to make Windows Explorer show file extensions, see ",(0,a.kt)("a",{parentName:"p",href:"https://www.howtogeek.com/205086/beginner-how-to-make-windows-show-file-extensions/"},"this article on HowToGeek"))),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"You can verify if the board flashed correctly by checking if the firmware.bin file has been changed to firmware.CUR on the SD card. If you have trouble flashing the motherboard, start unplugging your wires beginning with the endstops, sometimes faulty wiring can cause the board to not boot properly.")),(0,a.kt)("p",null,"If you're going through initial setup please continue in the ",(0,a.kt)("a",{parentName:"p",href:"/docs/1.2.x/installation#setup"},"installation guide")),(0,a.kt)("h2",{id:"manual-firmware-upgrade"},"Manual firmware upgrade"),(0,a.kt)("p",null,"Sometimes klipper makes changes to the microcontroller code and thus your MCU need to be reflashed with new firmware. If you see an error like this:"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Firmware version mismatch between host and guest",src:r(7933).Z,width:"849",height:"260"})),(0,a.kt)("p",null,"And the host version number is larger than the mcu version number, you need to flash your control board. If the host version is lower than the MCU number, you need to update klipper on your pi. RatOS compiles the firmware binary for you each time klipper is updated (while the SKR 2 is connected), you can find the most recent firmware in the Mainsail Machine page under the ",(0,a.kt)("inlineCode",{parentName:"p"},"firmware_binaries")," folder)"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"RatOS automatically compiles new firmware for your board when klipper is updated and places it in the firmware_binaries folder, you can download the binary from here and flash via SD card manually. Follow the process described above.")))}m.isMDXComponent=!0},9447:function(e,t,r){t.Z=r.p+"assets/files/skr-2-429-wiring-full-7ba0d169aa9036552b8c02240700b5aa.svg"},7933:function(e,t,r){t.Z=r.p+"assets/images/firmware_version_mismatch-456c9561ecf03b8fc5c498f42ce6a891.png"},2293:function(e,t){t.Z="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmx1Y2lkPSJsdWNpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjE2Ij48ZyBzdHJva2U9IiM3YWI2NDgiIHN0cm9rZS13aWR0aD0iMyIgZmlsbD0iI2ZmZiIgbHVjaWQ6cGFnZS10YWItaWQ9IjBfMCIgIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMiwgLTEyKSI+PHBhdGggZD0iTTQzLjg4IDI3Ljg2aC0yMy43VjIwLjJoMjMuN3Y3LjY2eiIvPjxwYXRoIGQ9Ik00My44OCAyMi4wNmwtMy44NCA0LjItNC4wOC00LjItMy45NCA0LjItMy45OC00LjItNCA0LjItMy44Ny00LjIiLz48L2c+PC9zdmc+"},7079:function(e,t,r){t.Z=r.p+"assets/images/skr-2-429-wiring-27fa38d7a5fe0e7110712638fe97a925.svg"}}]);